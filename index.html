<!DOCTYPE HTML>
<html>
<head>
    <title>Big Picture by HTML5 UP</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
    <!-- D3.js 라이브러리 추가 -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body class="is-preload">

    <!-- Header -->
    <header id="header">
        <h1>Big Picture</h1>
        <nav>
            <ul>
                <li><a href="#intro">Intro</a></li>
                <li><a href="#one">What I Do</a></li>
                <li><a href="#two">Who I Am</a></li>
                <li><a href="#work">My Work</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

		<!-- Intro -->
		<section id="intro" class="main style1 dark fullscreen">
			<div class="content">
				<header>
					<h2> Global Warming </h2>
					<h2>비상! 비상! </h2>
				</header>
				<p>Welcome to <strong>Big Picture</strong> a responsive site template designed by <a href="https://html5up.net">HTML5 UP</a><br />
				and released for free under the <a href="https://html5up.net/license">Creative Commons Attribution license</a>.</p>
				<footer>
					<a href="#one" class="button style2 down">More</a>
				</footer>
			</div>
		</section>

		<!-- One -->
		<section id="one" class="main style2 right dark fullscreen">
			<div class="content box style2">
				<header>
					<h2>열사병 (이한상, 박가희)</h2>
				</header>
				<div id="visualization"></div> <!-- 시각화가 삽입될 곳 -->
			</div>
			<a href="#two" class="button style2 down anchored">Next</a>
		</section>

    <!-- D3.js 시각화 코드 추가 -->
	<script>
		// IntersectionObserver 설정
		const observer = new IntersectionObserver((entries, observer) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					// 섹션이 화면에 보일 때 D3.js 시각화를 시작
					startVisualization();
					observer.unobserve(entry.target);  // 시각화를 한 번만 실행하도록 관찰 중지
				}
			});
		}, { threshold: 0.5 });  // 섹션의 50%가 화면에 보일 때 트리거
	
		// 'one' 섹션을 관찰 대상으로 설정
		observer.observe(document.querySelector('#one'));
	
		// D3.js 시각화 함수 정의
		function startVisualization() {
			d3.json("data/temp_anomaly.json").then(function(data) {
				var svgWidth = 600, svgHeight = 400, margin = {top: 20, right: 20, bottom: 30, left: 50};
				var width = svgWidth - margin.left - margin.right;
				var height = svgHeight - margin.top - margin.bottom;
	
				var svg = d3.select("#visualization")
							.append("svg")
							.attr("width", svgWidth)
							.attr("height", svgHeight)
							.append("g")
							.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
	
				var x = d3.scaleLinear().domain([1, 12]).range([0, width]);
				var y = d3.scaleLinear().domain([-5, 7]).range([height, 0]);
	
				var line = d3.line()
					.x(function(d) { return x(d.Month); })
					.y(function(d) { return y(d.temp_anomaly); });
	
				var years = Array.from(new Set(data.map(d => d.Year))).sort();
				var color = d3.scaleSequential(d3.interpolateYlOrRd)
							  .domain(d3.extent(years));
	
				var yearIndex = 0;
	
				function drawNextYear() {
					if (yearIndex >= years.length) return;
	
					var year = years[yearIndex];
					var yearData = data.filter(d => d.Year === year);
	
					svg.append("path")
					.datum(yearData)
					.attr("fill", "none")
					.attr("stroke", color(year))
					.attr("stroke-width", 1.5)
					.attr("d", line)
					.attr("stroke-dasharray", function() {
							var totalLength = this.getTotalLength();
							return totalLength + " " + totalLength;
					})
					.attr("stroke-dashoffset", function() {
							return this.getTotalLength();
					})
					.transition()
					.duration(300)  // 애니메이션 속도
					.ease(d3.easeLinear)
					.attr("stroke-dashoffset", 0);
	
					yearIndex++;
					setTimeout(drawNextYear, 150);  // 다음 연도 그리기
				}
	
				svg.append("g")
				.attr("transform", "translate(0," + height + ")")
				.call(d3.axisBottom(x).tickFormat(d3.format("d")));
	
				svg.append("g")
				.call(d3.axisLeft(y));
	
				drawNextYear();
			});
		}
	</script>
	<!-- Graph -->
	<section id="work" class="main style3 primary">
		<div class="content">
			<header>
				<h2>My Work</h2>
				<p>Lorem ipsum dolor sit amet et sapien sed elementum egestas dolore condimentum.
				Fusce blandit ultrices sapien, in accumsan orci rhoncus eu. Sed sodales venenatis
				arcu, id varius justo euismod in. Curabitur egestas consectetur magna vitae.</p>
			</header>

			<!-- Gallery  -->
				<div class="gallery">
					<article class="from-left">
						<a href="images/fulls/01.jpg" class="image fit"><img src="images/thumbs/01.jpg" title="The Anonymous Red" alt="" /></a>
					</article>
					<article class="from-right">
						<a href="images/fulls/02.jpg" class="image fit"><img src="images/thumbs/02.jpg" title="Airchitecture II" alt="" /></a>
					</article>
				</div>

		</div>
	</section>

	<!-- Two -->
		<section id="two" class="main style2 left dark fullscreen">
			<div class="content box style2">
				<header>
					<h2>이상기후 - 곤충대발생, 스콜 등 (최윤서 강래현)</h2>
				</header>
				<p>Lorem ipsum dolor sit amet et sapien sed elementum egestas dolore condimentum.
				Fusce blandit ultrices sapien, in accumsan orci rhoncus eu. Sed sodales venenatis arcu,
				id varius justo euismod in. Curabitur egestas consectetur magna.</p>
			</div>
			<a href="#three" class="button style2 down anchored">Next</a>
		</section>
	
	<!-- Three -->
		<section id="three" class="main style2 right dark fullscreen">
			<div class="content box style2">
				<header>
					<h2>침수 (장민기, 김태린)</h2>
				</header>
				<p>Lorem ipsum dolor sit amet et sapien sed elementum egestas dolore condimentum.
				Fusce blandit ultrices sapien, in accumsan orci rhoncus eu. Sed sodales venenatis arcu,
				id varius justo euismod in. Curabitur egestas consectetur magna.</p>
			</div>
			<a href="#work" class="button style2 down anchored">Next</a>
		</section>

	<!-- Work -->
		<section id="work" class="main style3 primary">
			<div class="content">
				<header>
					<h2>My Work</h2>
					<p>Lorem ipsum dolor sit amet et sapien sed elementum egestas dolore condimentum.
					Fusce blandit ultrices sapien, in accumsan orci rhoncus eu. Sed sodales venenatis
					arcu, id varius justo euismod in. Curabitur egestas consectetur magna vitae.</p>
				</header>

				<!-- Gallery  -->
					<div class="gallery">
						<article class="from-left">
							<a href="images/fulls/01.jpg" class="image fit"><img src="images/thumbs/01.jpg" title="The Anonymous Red" alt="" /></a>
						</article>
						<article class="from-right">
							<a href="images/fulls/02.jpg" class="image fit"><img src="images/thumbs/02.jpg" title="Airchitecture II" alt="" /></a>
						</article>
						<article class="from-left">
							<a href="images/fulls/03.jpg" class="image fit"><img src="images/thumbs/03.jpg" title="Air Lounge" alt="" /></a>
						</article>
						<article class="from-right">
							<a href="images/fulls/04.jpg" class="image fit"><img src="images/thumbs/04.jpg" title="Carry on" alt="" /></a>
						</article>
						<article class="from-left">
							<a href="images/fulls/05.jpg" class="image fit"><img src="images/thumbs/05.jpg" title="The sparkling shell" alt="" /></a>
						</article>
						<article class="from-right">
							<a href="images/fulls/06.jpg" class="image fit"><img src="images/thumbs/06.jpg" title="Bent IX" alt="" /></a>
						</article>
					</div>

			</div>
		</section>

	<!-- Contact -->
		<section id="contact" class="main style3 secondary">
			<div class="content">
				<header>
					<h2>Say Hello.</h2>
					<p>Lorem ipsum dolor sit amet et sapien sed elementum egestas dolore condimentum.</p>
				</header>
				<div class="box">
					<form method="post" action="#">
						<div class="fields">
							<div class="field half"><input type="text" name="name" placeholder="Name" /></div>
							<div class="field half"><input type="email" name="email" placeholder="Email" /></div>
							<div class="field"><textarea name="message" placeholder="Message" rows="6"></textarea></div>
						</div>
						<ul class="actions special">
							<li><input type="submit" value="Send Message" /></li>
						</ul>
					</form>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<footer id="footer">

			<!-- Icons -->
				<ul class="icons">
					<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
					<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="#" class="icon brands fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
					<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
					<li><a href="#" class="icon brands fa-pinterest"><span class="label">Pinterest</span></a></li>
				</ul>

			<!-- Menu -->
				<ul class="menu">
					<li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
				</ul>

		</footer>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.poptrox.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
		<!-- D3.js 라이브러리 추가 -->
		<script src="https://d3js.org/d3.v7.min.js"></script>

	</body>
</html>